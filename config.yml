# Diffalyzer Configuration
#
# This file configures the behavior of diffalyzer when analyzing your codebase.
# Configuration files are auto-detected in this order:
# 1. .diffalyzer.yml
# 2. diffalyzer.yml
# 3. config.yml
#
# You can also specify a custom config file path with: --config path/to/config.yml
#
# Method-Level Granularity (Default)
# -----------------------------------
# Method-level granularity is ENABLED BY DEFAULT.
# This mode tracks which specific methods changed and only outputs files containing affected methods.
# This is more precise than file-level analysis - fewer files are output.
# To disable and use file-level granularity, use --file-level flag.
#
# Output Formats:
#   --output phpunit: Outputs affected test files only (default)
#   --output psalm:   Outputs all affected files (for static analysis)
#
# How it works:
# - Analyzes which methods changed
# - Finds all methods that depend on those changes
# - Outputs only the files containing affected methods
#
# Examples:
#   bin/diffalyzer analyze --output phpunit  # test files with affected tests
#   bin/diffalyzer analyze --output psalm    # all files with affected code
#   bin/diffalyzer analyze --file-level      # file-level analysis (faster but less precise)
#
# Usage with tools:
#   bin/diffalyzer analyze | xargs phpunit                    # Run affected tests
#   bin/diffalyzer analyze --output=psalm | xargs psalm      # Analyze affected files

# Full Scan Patterns
# ------------------
# Define patterns that trigger a full scan when matched against changed files.
# When a full scan is triggered, diffalyzer outputs an empty string, which tells
# most tools (PHPUnit, Psalm, etc.) to run on all files instead of just affected ones.
#
# Pattern Types:
#   - Glob patterns: Simple wildcards like "*.json", "composer.lock", "config/**"
#   - Regex patterns: Must start with / or #, e.g., "/\.config\.(js|ts)$/"
#
# Complete Override Behavior:
#   - If patterns are defined here, they REPLACE the built-in defaults
#   - To disable all full scans, set: full_scan_patterns: []
#   - CLI --full-scan-pattern always overrides config and built-in patterns
#
# Built-in defaults (used when this config is empty or not found):
#   - composer.json
#   - composer.lock

full_scan_patterns:
  # Dependency management files (common triggers for full scans)
  - composer.json
  - composer.lock
  # Uncomment to add more patterns:
  # - package.json
  # - package-lock.json
  # - yarn.lock
  # - pnpm-lock.yaml

  # Configuration files
  # - "*.config.php"
  # - "config/**"
  # - ".env"

  # Build/deployment files
  # - "Dockerfile"
  # - "docker-compose.yml"

  # Regex examples (notice the / delimiter):
  # - "/\\.(env|config)$/"
  # - "/^(config|deploy)\//"

# Example: Disable full scans entirely
# full_scan_patterns: []

# Example: Only trigger on package.json changes
# full_scan_patterns:
#   - package.json
